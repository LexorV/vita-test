import{V as a}from"./index-BGG8ARpm.js";import{api as d}from"./axios-BCEhPGnj.js";const u=a("post",{state:()=>({posts:[],isLoaded:!1,usersById:{},targetUserId:null,editInitial:null}),getters:{sortedPosts:t=>[...t.posts].sort((e,i)=>new Date(i.post.dateTime).getTime()-new Date(e.post.dateTime).getTime()),getUserById:t=>e=>t.usersById[e]||null,hasTargetUser:t=>t.targetUserId!==null,hasEditInitial:t=>t.editInitial!==null},actions:{async fetchAllPosts(){if(this.isLoaded&&this.posts.length>0)return;const{data:t}=await d.get("/userInfo/findAll"),e=[],i={};for(const s of t??[]){i[s.id]=s;const o=s.fullName||s.blogName||"";for(const r of s.post??[])e.push({post:r,author:o,userId:s.id})}this.posts=e.sort((s,o)=>new Date(o.post.dateTime).getTime()-new Date(s.post.dateTime).getTime()),this.usersById=i,this.isLoaded=!0},invalidatePosts(){this.isLoaded=!1},removePostById(t){this.posts=this.posts.filter(e=>e.post.id!==t)},setTargetUserId(t){this.targetUserId=t},clearTargetUser(){this.targetUserId=null},setEditInitialFromPost(t){this.editInitial={id:t.id,title:t.title,briefDescription:t.briefDescription,fullDescription:t.fullDescription}},clearEditInitial(){this.editInitial=null}}});export{u};
